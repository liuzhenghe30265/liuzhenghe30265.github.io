<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-he-32x32.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-he-32x32.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="JavaScript,Node.js,">










<meta name="description" content="一、fs 基础方法： fs.stat 检测是文件还是目录。 fs.mkdir 创建目录。 fs.writeFile 创建写入文件。 fs.appendFile 追加文件。 fs.readFile 读取文件（异步）。 fs.readFileSync 读取文件（同步）。 fs.readdir 读取目录。 fs.rename 重命名。 fs.rmdir 删除目录。 fs.unlink 删除文件。  1、">
<meta name="keywords" content="JavaScript,Node.js">
<meta property="og:type" content="article">
<meta property="og:title" content="05Node.js文件管理模块fs">
<meta property="og:url" content="http://yoursite.com/2019/01/02/05Node.js文件管理模块fs/index.html">
<meta property="og:site_name" content="刘政和">
<meta property="og:description" content="一、fs 基础方法： fs.stat 检测是文件还是目录。 fs.mkdir 创建目录。 fs.writeFile 创建写入文件。 fs.appendFile 追加文件。 fs.readFile 读取文件（异步）。 fs.readFileSync 读取文件（同步）。 fs.readdir 读取目录。 fs.rename 重命名。 fs.rmdir 删除目录。 fs.unlink 删除文件。  1、">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/9373308-64c9fff2e2683bb1.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:updated_time" content="2019-06-07T04:05:34.245Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="05Node.js文件管理模块fs">
<meta name="twitter:description" content="一、fs 基础方法： fs.stat 检测是文件还是目录。 fs.mkdir 创建目录。 fs.writeFile 创建写入文件。 fs.appendFile 追加文件。 fs.readFile 读取文件（异步）。 fs.readFileSync 读取文件（同步）。 fs.readdir 读取目录。 fs.rename 重命名。 fs.rmdir 删除目录。 fs.unlink 删除文件。  1、">
<meta name="twitter:image" content="https://upload-images.jianshu.io/upload_images/9373308-64c9fff2e2683bb1.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2019/01/02/05Node.js文件管理模块fs/">







  <script>
  (function(i,s,o,g,r,a,m){i["DaoVoiceObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;a.charset="utf-8";m.parentNode.insertBefore(a,m)})(window,document,"script",('https:' == document.location.protocol ? 'https:' : 'http:') + "//widget.daovoice.io/widget/0f81ff2f.js","daovoice")
  daovoice('init', {
      app_id: "b85daeac"
    });
  daovoice('update');
  </script>


  <title>05Node.js文件管理模块fs | 刘政和</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">刘政和</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">All is well!</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            关于我
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="/404/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br>
            
            公益404
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/01/02/05Node.js文件管理模块fs/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="LiuZhenghe">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/blog_icon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="刘政和">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">05Node.js文件管理模块fs</h1>
        

        <div class="post-meta">

          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-01-02T00:00:00+08:00">
                2019-01-02
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Web/" itemprop="url" rel="index">
                    <span itemprop="name">Web</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h3 id="一、fs-基础方法："><a href="#一、fs-基础方法：" class="headerlink" title="一、fs 基础方法："></a>一、fs 基础方法：</h3><ul>
<li>fs.stat 检测是文件还是目录。</li>
<li>fs.mkdir 创建目录。</li>
<li>fs.writeFile 创建写入文件。</li>
<li>fs.appendFile 追加文件。</li>
<li>fs.readFile 读取文件（异步）。</li>
<li>fs.readFileSync 读取文件（同步）。</li>
<li>fs.readdir 读取目录。</li>
<li>fs.rename 重命名。</li>
<li>fs.rmdir 删除目录。</li>
<li>fs.unlink 删除文件。</li>
</ul>
<h4 id="1、fs-stat：检测是文件还是目录"><a href="#1、fs-stat：检测是文件还是目录" class="headerlink" title="1、fs.stat：检测是文件还是目录"></a>1、fs.stat：检测是文件还是目录</h4><p>fs.js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">const fs = require(&quot;fs&quot;);</span><br><span class="line">fs.stat(&apos;fs.js&apos;, (error, stats) =&gt; &#123;</span><br><span class="line">    if (error) &#123;</span><br><span class="line">        console.log(error);</span><br><span class="line">        return false;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        console.log(stats);</span><br><span class="line">        console.log(`文件：$&#123;stats.isFile()&#125;`); // 文件：true</span><br><span class="line">        console.log(`目录：$&#123;stats.isDirectory()&#125;`); // 目录：false</span><br><span class="line"></span><br><span class="line">        return false;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>执行 node fs.js。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">console.log(stats)：</span><br><span class="line">&#123; dev: 636204,</span><br><span class="line">  mode: 33206,</span><br><span class="line">  nlink: 1,</span><br><span class="line">  uid: 0,</span><br><span class="line">  gid: 0,</span><br><span class="line">  rdev: 0,</span><br><span class="line">  blksize: undefined,</span><br><span class="line">  ino: 1407374883609714,</span><br><span class="line">  size: 242,</span><br><span class="line">  blocks: undefined,</span><br><span class="line">  atime: 2018-12-25T09:14:40.866Z,</span><br><span class="line">  mtime: 2019-01-15T09:18:06.561Z,</span><br><span class="line">  ctime: 2019-01-15T09:18:06.561Z,</span><br><span class="line">  birthtime: 2018-12-25T09:14:40.866Z &#125;</span><br><span class="line"></span><br><span class="line">console.log(`文件：$&#123;stats.isFile()&#125;`); // 文件：true</span><br><span class="line">console.log(`目录：$&#123;stats.isDirectory()&#125;`); // 目录：false</span><br></pre></td></tr></table></figure>

<p><strong>补充：</strong></p>
<ul>
<li>stats.isFile()  如果是文件返回 true，否则返回 false。</li>
<li>stats.isDirectory() 如果是目录返回 true，否则返回 false。</li>
<li>stats.isBlockDevice() 如果是块设备返回 true，否则返回 false。</li>
<li>stats.isCharacterDevice() 如果是字符设备返回 true，否则返回 false。</li>
<li>stats.isSymbolicLink()  如果是软链接返回 true，否则返回 false。</li>
<li>stats.isFIFO()  如果是FIFO，返回true，否则返回 false，FIFO是UNIX中的一种特殊类型的命令管道。</li>
<li>stats.isSocket()  如果是 Socket 返回 true，否则返回 false。</li>
</ul>
<h4 id="2、fs-mkdir：创建目录"><a href="#2、fs-mkdir：创建目录" class="headerlink" title="2、fs.mkdir：创建目录"></a>2、fs.mkdir：创建目录</h4><p>fs.js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">const fs = require(&quot;fs&quot;);</span><br><span class="line">fs.mkdir(&apos;images&apos;, (err) =&gt; &#123;</span><br><span class="line">    if (err) &#123;</span><br><span class="line">        console.log(err);</span><br><span class="line">        return false;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        console.log(&quot;目录创建成功！&quot;);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>接收参数：</p>
<ul>
<li>path：将创建的目录路径。</li>
<li>mode：目录权限（读写权限），默认 0777。</li>
<li>callback：回调，传递异常参数 err。</li>
</ul>
<p>执行 node fs.js。</p>
<p>会发现目录下多了一个 images 文件夹。</p>
<h4 id="3、fs-rmdir：删除目录"><a href="#3、fs-rmdir：删除目录" class="headerlink" title="3、fs.rmdir：删除目录"></a>3、fs.rmdir：删除目录</h4><p>fs.js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">const fs = require(&quot;fs&quot;);</span><br><span class="line">fs.rmdir(&apos;images&apos;, (err) =&gt; &#123;</span><br><span class="line">    if (err) &#123;</span><br><span class="line">        console.log(err);</span><br><span class="line">        return false;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        console.log(&quot;目录删除成功！&quot;);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>执行 node fs.js。</p>
<p>会发现目录下 images 文件夹被删除。</p>
<h4 id="4、fs-writeFile：创建写入文件"><a href="#4、fs-writeFile：创建写入文件" class="headerlink" title="4、fs.writeFile：创建写入文件"></a>4、fs.writeFile：创建写入文件</h4><p>fs.js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">const fs = require(&quot;fs&quot;);</span><br><span class="line">fs.writeFile(&quot;index.js&quot;, &quot;hello NodeJS！&quot;, (err) =&gt; &#123;</span><br><span class="line">    if (err) &#123;</span><br><span class="line">        console.log(err);</span><br><span class="line">        return false;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        console.log(&quot;文件写入成功！&quot;);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>接收参数：</p>
<ul>
<li>filename (String) 文件名称。</li>
<li>data (String | Buffer) 将要写入的内容，可以是字符串或者 buffer 数据。</li>
<li>encoding (String) 可选。默认 ‘utf-8’，当 data 是 buffer 时，该值应该为 ignored。</li>
<li>mode (Number) 文件读写权限，默认 438。</li>
<li>flag (String) 默认值 ‘w’。</li>
<li>callback { Function } 回调，传递一个异常参数 err。</li>
</ul>
<p>执行 node fs.js。</p>
<p>会发现目录下多了一个 index.js 文件夹，并且添加了“hello NodeJS！”的内容。</p>
<p>注意，这样的写入，是清空原文件中的所有数据，然后添加“hello NodeJS！”这句话，即：存在即覆盖，不存在即创建。</p>
<h4 id="5、fs-unlink：删除文件"><a href="#5、fs-unlink：删除文件" class="headerlink" title="5、fs.unlink：删除文件"></a>5、fs.unlink：删除文件</h4><p>fs.js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">const fs = require(&quot;fs&quot;);</span><br><span class="line">fs.unlink(&quot;index.js&quot;, (err) =&gt; &#123;</span><br><span class="line">    if (err) &#123;</span><br><span class="line">        console.log(err);</span><br><span class="line">        return false;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        console.log(&quot;删除成功！&quot;);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>执行 node fs.js。</p>
<p>会发现目录下 index.js 文件被删除。</p>
<h4 id="6、fs-appendFile：追加文件"><a href="#6、fs-appendFile：追加文件" class="headerlink" title="6、fs.appendFile：追加文件"></a>6、fs.appendFile：追加文件</h4><p>fs.js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">const fs = require(&quot;fs&quot;);</span><br><span class="line">fs.appendFile(&quot;index.js&quot;, &quot;追加的内容&quot;, (err) =&gt; &#123;</span><br><span class="line">    if (err) &#123;</span><br><span class="line">        console.log(err);</span><br><span class="line">        return false;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        console.log(&quot;追加成功！&quot;);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>执行 node fs.js。</p>
<p>会发现目录下 index.js 文件后有追加了一段话“追加的内容”。</p>
<h4 id="7、fs-readFile：读取文件"><a href="#7、fs-readFile：读取文件" class="headerlink" title="7、fs.readFile：读取文件"></a>7、fs.readFile：读取文件</h4><p>fs.js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">const fs = require(&quot;fs&quot;);</span><br><span class="line">fs.readFile(&quot;index.js&quot;, (err, data) =&gt; &#123;</span><br><span class="line">    if (err) &#123;</span><br><span class="line">        console.log(err);</span><br><span class="line">        return false;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        console.log(&quot;读取文件成功！&quot;);</span><br><span class="line">        console.log(data); // &lt;Buffer 68 65 6c 6c 6f 20 4e 6f 64 65 4a 53 ef bc 81 e8 bf bd e5 8a a0 e7 9a 84 e5 86 85 e5 ae b9&gt;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>执行 node fs.js。</p>
<p>console.log(data) 打印结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;Buffer 68 65 6c 6c 6f 20 4e 6f 64 65 4a 53 ef bc 81 e8 bf bd e5 8a a0 e7 9a 84 e5 86 85 e5 ae b9&gt;</span><br></pre></td></tr></table></figure>

<h4 id="8、fs-readdir：读取目录"><a href="#8、fs-readdir：读取目录" class="headerlink" title="8、fs.readdir：读取目录"></a>8、fs.readdir：读取目录</h4><p>fs.js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">const fs = require(&quot;fs&quot;);</span><br><span class="line">fs.readdir(&quot;node_modules&quot;, (err, data) =&gt; &#123;</span><br><span class="line">    if (err) &#123;</span><br><span class="line">        console.log(err);</span><br><span class="line">        return false;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        console.log(&quot;读取目录成功！&quot;);</span><br><span class="line">        console.log(data); // [ &apos;03_tool_multiply.js&apos;, &apos;my_module&apos; ]</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>执行 node fs.js。</p>
<p>console.log(data) 打印结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[ &apos;03_tool_multiply.js&apos;, &apos;my_module&apos; ]</span><br></pre></td></tr></table></figure>

<h4 id="9、fs-rename：重命名"><a href="#9、fs-rename：重命名" class="headerlink" title="9、fs.rename：重命名"></a>9、fs.rename：重命名</h4><p>fs.js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">const fs = require(&quot;fs&quot;);</span><br><span class="line">fs.rename(&quot;index.js&quot;, &quot;new_index.js&quot;, (err) =&gt; &#123;</span><br><span class="line">    if (err) &#123;</span><br><span class="line">        console.log(err);</span><br><span class="line">        return false;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        console.log(&quot;重命名成功！&quot;);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>执行 node fs.js。</p>
<p>会发现目录下 index.js 文件被修改为 new_index.js。</p>
<h4 id="10、补充：fs-rename-还可以剪切"><a href="#10、补充：fs-rename-还可以剪切" class="headerlink" title="10、补充：fs.rename 还可以剪切"></a>10、补充：fs.rename 还可以剪切</h4><p>fs.js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">const fs = require(&quot;fs&quot;);</span><br><span class="line">fs.rename(&quot;new_index.js&quot;, &quot;node_modules/new_index.js&quot;, (err) =&gt; &#123;</span><br><span class="line">    if (err) &#123;</span><br><span class="line">        console.log(err);</span><br><span class="line">        return false;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        console.log(&quot;剪切成功！&quot;);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>执行 node fs.js。</p>
<p>会发现目录下 new_index.js 文件被移动到了 node_modules 目录下。</p>
<h3 id="二、fs-案例"><a href="#二、fs-案例" class="headerlink" title="二、fs 案例"></a>二、fs 案例</h3><h4 id="1、判断是否有-upload-目录"><a href="#1、判断是否有-upload-目录" class="headerlink" title="1、判断是否有 upload 目录"></a>1、判断是否有 upload 目录</h4><p>fsDemo.js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">const fs = require(&quot;fs&quot;);</span><br><span class="line">fs.stat(&quot;upload&quot;, (err, stats) =&gt; &#123;</span><br><span class="line">    if (err) &#123;</span><br><span class="line">        // 如果没有，创建 upload 目录</span><br><span class="line">        fs.mkdir(&quot;upload&quot;, (err) =&gt; &#123;</span><br><span class="line">            if (err) &#123;</span><br><span class="line">                console.log(err);</span><br><span class="line">                return false;</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                console.log(&quot;创建成功！&quot;);</span><br><span class="line">            &#125;;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        console.log(stats.isDirectory()); // true</span><br><span class="line">        console.log(&quot;有 upload 目录，你可以做更多操作！&quot;);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>执行 fsDemo.js。</p>
<p>打印结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">console.log(stats.isDirectory()); // true</span><br><span class="line">有 upload 目录，你可以做更多操作！</span><br></pre></td></tr></table></figure>

<h4 id="2、读取目录全部文件"><a href="#2、读取目录全部文件" class="headerlink" title="2、读取目录全部文件"></a>2、读取目录全部文件</h4><p>fsDemo.js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">const fs = require(&quot;fs&quot;);</span><br><span class="line">fs.readdir(&quot;../05fs/&quot;, (err, files) =&gt; &#123;</span><br><span class="line">    if (err) &#123;</span><br><span class="line">        console.log(err);</span><br><span class="line">        return false;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        console.log(files);</span><br><span class="line">        let filesArr = [];</span><br><span class="line"></span><br><span class="line">        (function getFile(i) &#123;</span><br><span class="line">            // 循环结束</span><br><span class="line">            if (i == files.length) &#123;</span><br><span class="line">                // 打印出所有目录</span><br><span class="line">                console.log(&quot;目录&quot;);</span><br><span class="line">                console.log(filesArr);</span><br><span class="line">                return false;</span><br><span class="line">            &#125;;</span><br><span class="line"></span><br><span class="line">            // 判断目录是文件还是文件夹</span><br><span class="line">            fs.stat(&quot;../05fs/&quot; + files[i], (err, stats) =&gt; &#123;</span><br><span class="line">                if (stats.isDirectory()) &#123;</span><br><span class="line">                    filesArr.push(files[i]);</span><br><span class="line">                &#125;;</span><br><span class="line">                // 递归调用</span><br><span class="line">                getFile(i + 1);</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;)(0);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>执行 fsDemo.js。</p>
<p>打印结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[ &apos;fs.js&apos;, &apos;fsDemo.js&apos;, &apos;fsStream.js&apos;, &apos;upload&apos; ]</span><br><span class="line">目录</span><br><span class="line">[ &apos;upload&apos; ]</span><br></pre></td></tr></table></figure>

<h3 id="三、fs-流"><a href="#三、fs-流" class="headerlink" title="三、fs 流"></a>三、fs 流</h3><h4 id="1、fs-流及其读取"><a href="#1、fs-流及其读取" class="headerlink" title="1、fs 流及其读取"></a>1、fs 流及其读取</h4><p>首先创建一个 index.js 文件，并添加测试文本。</p>
<p>fsStream.js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">const fs = require(&quot;fs&quot;);</span><br><span class="line">// 流的方式读取文件</span><br><span class="line">const fileReadStream = fs.createReadStream(&quot;index.js&quot;);</span><br><span class="line">// 读取次数</span><br><span class="line">let count = 0;</span><br><span class="line">// 保存数据</span><br><span class="line">let str = &quot;&quot;;</span><br><span class="line">// 开始读取</span><br><span class="line">fileReadStream.on(&quot;data&quot;, (chunk) =&gt; &#123;</span><br><span class="line">    console.log(`$&#123;++count&#125; 接收到：$&#123;chunk.length&#125;`);</span><br><span class="line">    str += chunk;</span><br><span class="line">&#125;);</span><br><span class="line">// 读取完成</span><br><span class="line">fileReadStream.on(&quot;end&quot;, () =&gt; &#123;</span><br><span class="line">    console.log(&quot;结束&quot;);</span><br><span class="line">    console.log(count);</span><br><span class="line">    console.log(str);</span><br><span class="line">&#125;);</span><br><span class="line">// 读取失败</span><br><span class="line">fileReadStream.on(&quot;err&quot;, (err) =&gt; &#123;</span><br><span class="line">    console.log(err);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>执行 fsStream.js。</p>
<p>打印结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1 接收到：18</span><br><span class="line">结束</span><br><span class="line">1</span><br><span class="line">fs 流及其读取</span><br></pre></td></tr></table></figure>

<h4 id="2、流的写入"><a href="#2、流的写入" class="headerlink" title="2、流的写入"></a>2、流的写入</h4><p>fsStream.js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">const fs = require(&quot;fs&quot;);</span><br><span class="line">let data = &quot;存入数据...&quot;;</span><br><span class="line">// 创建一个可以写入的流，写入到 index.js</span><br><span class="line">let fileWriteStream = fs.createWriteStream(&quot;index.js&quot;);</span><br><span class="line">// 开始写入</span><br><span class="line">fileWriteStream.write(data, &quot;utf8&quot;);</span><br><span class="line">// 写入完成</span><br><span class="line">fileWriteStream.end();</span><br><span class="line">fileWriteStream.on(&quot;finish&quot;, () =&gt; &#123;</span><br><span class="line">    console.log(&quot;写入完成！&quot;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>执行 fsStream.js。</p>
<p>打开 index.js 文件，发现里面内容变成了“存入数据…”。</p>
<p>打印结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">写入完成！</span><br></pre></td></tr></table></figure>

<p>以上我们就通过流的形式进行了读取和写入的操作。</p>
<hr>
<p><img src="https://upload-images.jianshu.io/upload_images/9373308-64c9fff2e2683bb1.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<h2 id="期待您的关注！"><a href="#期待您的关注！" class="headerlink" title="期待您的关注！"></a>期待您的关注！</h2>
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/JavaScript/" rel="tag"># JavaScript</a>
          
            <a href="/tags/Node-js/" rel="tag"># Node.js</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/01/02/03Node.js模块化CommonJS/" rel="next" title="03Node.js模块化CommonJS">
                <i class="fa fa-chevron-left"></i> 03Node.js模块化CommonJS
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/01/02/07Node.jsEvent/" rel="prev" title="07Node.jsEvent">
                07Node.jsEvent <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/blog_icon.jpg" alt="LiuZhenghe">
            
              <p class="site-author-name" itemprop="name">LiuZhenghe</p>
              <p class="site-description motion-element" itemprop="description">Web Developers</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">90</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">10</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">21</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/liuzhenghe30265" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:15901450207@163.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="http://www.liuzhenghe.cn/" target="_blank" title="liuzhenghe.cn">
                      
                        <i class="fa fa-fw fa-user"></i>liuzhenghe.cn</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#一、fs-基础方法："><span class="nav-text">一、fs 基础方法：</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1、fs-stat：检测是文件还是目录"><span class="nav-text">1、fs.stat：检测是文件还是目录</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2、fs-mkdir：创建目录"><span class="nav-text">2、fs.mkdir：创建目录</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3、fs-rmdir：删除目录"><span class="nav-text">3、fs.rmdir：删除目录</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4、fs-writeFile：创建写入文件"><span class="nav-text">4、fs.writeFile：创建写入文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5、fs-unlink：删除文件"><span class="nav-text">5、fs.unlink：删除文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6、fs-appendFile：追加文件"><span class="nav-text">6、fs.appendFile：追加文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#7、fs-readFile：读取文件"><span class="nav-text">7、fs.readFile：读取文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#8、fs-readdir：读取目录"><span class="nav-text">8、fs.readdir：读取目录</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#9、fs-rename：重命名"><span class="nav-text">9、fs.rename：重命名</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#10、补充：fs-rename-还可以剪切"><span class="nav-text">10、补充：fs.rename 还可以剪切</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#二、fs-案例"><span class="nav-text">二、fs 案例</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1、判断是否有-upload-目录"><span class="nav-text">1、判断是否有 upload 目录</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2、读取目录全部文件"><span class="nav-text">2、读取目录全部文件</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#三、fs-流"><span class="nav-text">三、fs 流</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1、fs-流及其读取"><span class="nav-text">1、fs 流及其读取</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2、流的写入"><span class="nav-text">2、流的写入</span></a></li></ol></li></ol><li class="nav-item nav-level-2"><a class="nav-link" href="#期待您的关注！"><span class="nav-text">期待您的关注！</span></a></li></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">LiuZhenghe</span>

  
</div>











        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
